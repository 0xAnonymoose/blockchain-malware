const argv = process.argv;
import { readFileSync } from 'fs'
import { createHash } from 'crypto'

if (argv.length < 3) {
  console.log('Usage: node checksumHex.mjs <filename> [offset] [length]');
} else {

  let data = readFileSync( argv[2], 'utf-8' );
  let offset = parseInt(argv[3] || 0);
  let len = parseInt(argv[4] || data.length )
  let slice = data.substring(offset,len);
  console.log('Input length:', data.length);
  console.log(' Hash offset: ', offset);
  console.log(' Hash length: ', len); 

  const hash = createHash('sha256').update(slice).digest('hex');
  console.log('    Checksum: ', hash);
}
