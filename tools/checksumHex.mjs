const argv = process.argv;
import { readFileSync } from 'fs'
import { createHash } from 'crypto'

if (argv.length < 3) {
  console.log('Usage: node checksumHex.mjs <filename> [offset] [end]');
} else {

  let data = readFileSync( argv[2], 'utf-8' );
  let offset = parseInt(argv[3] || 0);
  let end = parseInt(argv[4] || data.length )
  let slice = data.substring(offset,end);

  console.log('Input length:', data.length);
  console.log(' Hash offsets: ', offset,'to',end);
  console.log(' Hash length: ', end-offset); 

  const hash = createHash('sha256').update(slice).digest('hex');
  console.log('    Checksum: ', hash);
}
